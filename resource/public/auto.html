<!DOCTYPE HTML charset>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
<!--<button id="#atoken" onclick="ksakj()">获取</button>-->
<div>token正在提交中，按F12可以查看日志...</div>
<script>
    var ppp = null

    var a = document.createElement("script");
    a.src = "https://client-api.xyhelper.cn/v2/35536E1E-65B4-4D96-9D97-6ADB7EFF8147/api.js"
    a.async = true
    a.defer = true
    a.setAttribute("data-status", "loading")
    a.setAttribute("data-callback", "useArkoseSetupEnforcement")
    window.useArkoseSetupEnforcement = function (e) {
        // console.log(e)
        window.ark = e
        ppp = e
        e.setConfig({
            onCompleted: function (e) {
                // console.log("onCompleted")
                // console.log("=========================================================================================")
                console.log(e.token)
                // if(e.token && String(e.token).includes("sup=1|rid=")){
                //     fetch('http://arkosetoken.xiu.ee/token', {
                //         method: 'POST',
                //         headers: {
                //             'Content-Type': 'application/json',
                //             'key':"123123"
                //         },
                //         body: JSON.stringify({token: e.token,date: getTime()})
                //     }).then((res) => {
                //         console.log(res)
                //         // ark.run()
                //     })
                // }

                
            },
            onError: function (e) {
                console.log("onError")
                console.log(e)
            },
            onFailed: function (e) {
                console.log("onFailed")
                console.log(e)
            },
            onShown: function (e) {
                console.log("onShown")
                console.log(e)
            },
            siteData: {
                location: {
                    "ancestorOrigins": {},
                    "href": "https://chat.openai.com/?model=gpt-4",
                    "origin": "https://chat.openai.com",
                    "protocol": "https:",
                    "host": "chat.openai.com",
                    "hostname": "chat.openai.com",
                    "port": "",
                    "pathname": "/",
                    "search": "?model=gpt-4",
                    "hash": ""
                }
            }
        })
        // console.log(e.getConfig())
        ppp.run()
    }

    let c = 1;
    function ksakj() {
        setInterval(() => {
            console.log("当前第" + c  + "次获取token");
            c++;
            ppp.run();
        }, 5000);
        // console.log(ppp)
        
    }
    
    setInterval(() => {
            console.log("当前第" + c  + "次获取token");
            c++;
            ppp.run();
        }, 5000);

    function padNumber(num) {
        return num < 10 ? '0' + num : num;
    }

    function getTime(){
        let date = new Date();
        let year = date.getFullYear();
        let month = padNumber(date.getMonth() + 1); // Month is 0-based
        let day = padNumber(date.getDate());
        let hours = padNumber(date.getHours());
        let minutes = padNumber(date.getMinutes());
        let seconds = padNumber(date.getSeconds());
        let formattedDate = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        console.log(formattedDate); // Outputs something like "2023-07-09 17:30:15"
        return formattedDate;
    }

    document.body.appendChild(a)
</script>
</body>
</html>
